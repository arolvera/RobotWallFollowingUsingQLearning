<launch>
    <param name="use_sim_time" value="true" />
    <arg name="world_file" default="worlds/largemaze-triton-lidar.world"/>
    <arg name="train" default="False"/>
    <include file="$(find gazebo_ros)/launch/empty_world.launch">
      <arg name="use_sim_time" value="true"/>
      <arg name="debug" value="false "/>  <!-- false for real training, true for debugging -->
      <arg name="paused" value="false"/>
      <arg name="gui" value="true" />
      <arg name="world_name" value="$(arg world_file)"/>
      <arg name="verbose" value="true"/>
      <arg name="recording" value="false"/>
      
    </include>
  
    <node name="pointcloud_rotate" pkg="tf" type="static_transform_publisher"
        args="0 0 0 0 -1.58 1.58 camera_link triton_link 50" />

    <node pkg="stingray_sim" name="path_drawing" type="draw_path.py"/>
    <node pkg="tf" type="static_transform_publisher" name="broadcaster" 
      args= "0 0 0 0 0 0 1 triton_link world 10" output="screen"></node> 
    <node pkg="hector_mapping" type="hector_mapping" name="slam_hector" output="screen">
      <param name="pub_map_odom_transform" value="true"/>
      <param name="base_frame" value="triton_link"/>
      <param name="odom_frame" value="triton_link"/>
      <param name="map_frame"  value="map"/>
      <param name="map_update_distance_thresh" value="0.1"/>
      <param name="map_update_angle_thresh" value="0.1" />
  </node>
  <node pkg="follow_wall_sarsa" name="follow_wall_sarsa" args="$(arg train)" type="follow_wall_sarsa.py" output="screen"/>
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(find follow_wall_sarsa)/rviz/rl_mapping_sim.rviz" />
</launch>
